import base64
import os
import re
from io import BytesIO
from PIL import Image, ImageDraw
import tkinter as tk
from tkinter import filedialog


# 水印图片 可以自己指定
# markImage=Image.open("C:\\Users\\Administrator\\Desktop\\hq.png")

# 水印图片base64
base64_str = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGcGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA5LTI0VDEyOjI1OjQ1KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wOS0yNFQxMzoyNjo0MCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wOS0yNFQxMzoyNjo0MCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDplZWRjMzgyYi1lNjM5LWFjNDctYjg3Zi05Y2U4ODE3MjNiM2IiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6YjkzMGM1ZTItMTI4ZS03ZjQzLWI4NzctMGQxMDk2NWQ4MmQ0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjkzMGM1ZTItMTI4ZS03ZjQzLWI4NzctMGQxMDk2NWQ4MmQ0Ij4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+NTA5OTVCNzVFOEQxODU2NkRBRTUyMUJDRkM5OUUzNEI8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOTMwYzVlMi0xMjhlLTdmNDMtYjg3Ny0wZDEwOTY1ZDgyZDQiIHN0RXZ0OndoZW49IjIwMTktMDktMjRUMTI6MjU6NDUrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZWVkYzM4MmItZTYzOS1hYzQ3LWI4N2YtOWNlODgxNzIzYjNiIiBzdEV2dDp3aGVuPSIyMDE5LTA5LTI0VDEzOjI2OjQwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+MRYnZQAANFFJREFUeJztvVlsZGmW3/c7342FEdzJZCaTuWdV117Va013dVUvM+qZ9mhgC7IMoy1IECABY/cAepAFS4ANaGQ92A824BVqaKCH0cPYMCDAgro1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'
base64_data = re.sub('^data:image/.+;base64,', '', base64_str)
byte_data = base64.b64decode(base64_data)
image_data = BytesIO(byte_data)
markImage = Image.open(image_data)

# 原始微信头像
#originImage = Image.open("C:\\Users\\Administrator\\Desktop\\a.jpg")
root = tk.Tk()
root.withdraw()
fileName = filedialog.askopenfilename()
originImage = Image.open(fileName)


# 新建一张950*950 大小的白色背景图片
newImage = Image.new('RGBA', (950, 950), (255, 255, 255, 255))

# 置入原始图片 并且将原始图片强制设置为850*850
newImage.paste(originImage.resize((850, 850), Image.ANTIALIAS), (50, 50))

# 创建圆角蒙板
maskImg = Image.new('RGBA', (950, 950), (255, 255, 255, 255))
# 绘制内部带圆角正方形
x = 50  # 起始坐标x
y = 50  # 起始坐标y
w = h = 850  # 正方形宽高
r = 50  # 圆角半径
drawObject = ImageDraw.Draw(maskImg)
drawObject.ellipse((x, y, x+r, y+r), fill=0) # 绘制左上角圆
drawObject.ellipse((x+w-r, y, x+w, y+r), fill=0) # 绘制右上角圆
drawObject.ellipse((x, y+h-r, x+r, y+h), fill=0) # 绘制左下角圆
drawObject.ellipse((x+w-r, y+h-r, x+w, y+h), fill=0) # 绘制右下角圆
drawObject.rectangle((x+r/2, y, x+w-(r/2), y+h), fill=0) # 绘制竖向长方形
drawObject.rectangle((x, y+r/2, x+w, y+h-(r/2)), fill=0) # 绘制横向长方形

# 置入蒙板
r, g, b, a = maskImg.split()
newImage.paste(maskImg, (0, 0), mask=b)

# 设置水印图片大小
markImage = markImage.resize((300, 300), Image.ANTIALIAS)

# 置入水印图片
r, g, b, a = markImage.split()
newImage.paste(markImage, (650, 650, 950, 950), mask=a)

newImage.show()
